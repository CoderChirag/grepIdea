(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p:""};const t=require("dotenv");var n=e.n(t);const a=require("express");var r=e.n(a);const o=require("cors");var i=e.n(o);require("body-parser");const s=require("mongoose");var c=e.n(s);const l=require("express-session");var m=e.n(l);const u=require("passport");var d=e.n(u);const f=require("passport-local-mongoose");var p=e.n(f);const g=require("@sendgrid/mail");n().config(),g.setApiKey(process.env.SG_API_KEY);const v=function(e){g.send(e).then((function(){console.log("Email sent")})).catch((function(e){console.error("Mail Error: ".concat(e))}))},y=require("serialize-javascript");var b=e.n(y);const h=require("react");var E=e.n(h);const N=require("react-dom/server");var x=e.n(N);const w=require("react-router-dom"),j=(0,h.createContext)([{modalLink:""},function(){}]),O=require("@reach/router"),I=e.p+"8e8f8c278d221453e610a55324fa17ba.jpg",S=e.p+"7b8e6db4fbec38303d470a0a061fe217.svg",C=e.p+"bcf539c0aa719d4fd6b0f75d4aa3af82.svg",T=e.p+"f7eb89efee172984c4d92030e9b58be5.jpg",A=(e.p,require("react-dom")),P=function(e){var t=e.children,n=(0,h.useRef)(null);return n.current||(n.current=document.createElement("div")),(0,h.useEffect)((function(){var e=document.getElementById("modal");return e.appendChild(n.current),function(){return e.removeChild(n.current)}}),[]),(0,A.createPortal)(E().createElement("div",null,t),n.current)};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const U=function(){var e,t,n=(e=(0,h.useContext)(j),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],r=n[1];return E().createElement(P,null,E().createElement("i",{className:"fas fa-times",id:"close-icon",onClick:function(){return r(Object.assign({},a,{modalLink:""}))}}),E().createElement("form",{action:"/login",method:"post",className:"modal-form"},E().createElement("div",{className:"modal-flex"},E().createElement("h1",{id:"modal-header"},"GREPIDEA"),E().createElement("div",{className:"modal-row"},E().createElement("p",{className:"modal-label"},"Username"),E().createElement("input",{type:"text",className:"modal-input",name:"username",required:!0})),E().createElement("div",{className:"modal-row"},E().createElement("p",{className:"modal-label"},"Password"),E().createElement("input",{type:"password",className:"modal-input",name:"password",required:!0})),E().createElement("div",{className:"last-div"},E().createElement("button",{className:"modal-button modal-button-login"},"Log In"),E().createElement("p",{id:"modal-button-below-text"},"New User? Register"," ",E().createElement("span",{id:"modal-button-below-text-span",onClick:function(){return r(Object.assign({},a,{modalLink:"signup"}))}},"here"))))))};function B(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const M=function(){var e,t,n=(e=(0,h.useContext)(j),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],r=n[1];function o(e,t){var n=document.getElementsByClassName("modal-validation-text")[t],a=document.getElementsByClassName("modal-short-width-input")[t];/^(?=.*[0-9])|(?=.*[`~!@#$%^&*()\-+=|\\[\]{}"':;?/.><,_])/.test(e.target.value)?(n.innerText="Please Enter a Valid Name",a.style.outline="none",a.style.border="2px solid red"):(n.innerText=null,a.style.outline=null,a.style.border=null)}function i(e){var t=document.getElementsByClassName("modal-input")[1].value,n=document.getElementsByClassName("modal-validation-text")[4],a=document.getElementsByClassName("modal-input")[2];e.target.value!==t?(n.innerText="Password does not match",a.style.outline="none",a.style.border="2px solid red"):(n.innerText=null,a.style.outline=null,a.style.border=null)}return E().createElement(P,null,E().createElement("i",{className:"fas fa-times",id:"close-icon",onClick:function(){return r(Object.assign({},a,{modalLink:""}))}}),E().createElement("form",{action:"/signup",method:"post"},E().createElement("div",{className:"modal-flex"},E().createElement("h1",{id:"modal-header"},"GREPIDEA"),E().createElement("div",{className:"modal-short-row"},E().createElement("p",{className:"modal-label"},"First Name"),E().createElement("input",{type:"text",className:"modal-short-width-input",name:"firstName",required:!0,onChange:function(e){return o(e,0)}}),E().createElement("p",{className:"modal-validation-text"})),E().createElement("div",{className:"modal-short-row"},E().createElement("p",{className:"modal-label"},"Last Name"),E().createElement("input",{type:"text",className:"modal-short-width-input",name:"lastName",onChange:function(e){return o(e,1)}}),E().createElement("p",{className:"modal-validation-text"})),E().createElement("div",{className:"modal-row"},E().createElement("span",{className:"modal-label"},"E-Mail Address",E().createElement("input",{type:"email",name:"username",className:"modal-input",onChange:function(e){var t=document.getElementsByClassName("modal-validation-text")[2],n=document.getElementsByClassName("modal-input")[0];/^[a-zA-Z0-9]\.{0,1}([a-zA-Z0-9]+\.)*[a-zA-Z0-9]+@([a-z]+\.)+[a-z]{2,4}$/.test(e.target.value)?(t.innerText=null,n.style.outline=null,n.style.border=null):(t.innerText="Please Enter a Valid Email",n.style.outline="none",n.style.border="2px solid red")}}),E().createElement("p",{className:"modal-validation-text"}))),E().createElement("div",{className:"modal-row"},E().createElement("span",{className:"modal-label"},"Password",E().createElement("input",{type:"password",className:"modal-input",name:"password",onChange:function(e){var t=document.getElementsByClassName("modal-validation-text")[3],n=document.getElementsByClassName("modal-input")[1];/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[`~!@#$%^&*()\-+=|\\[\]{}"':;?/.><,_])(?=.{8,})/.test(e.target.value)?(t.innerText=null,n.style.outline=null,n.style.border=null):(t.innerText="The password must contain at least one lowercase letter, one uppercase letter, one number, one special character and must be at least 8 digits long",n.style.outline="none",n.style.border="2px solid red"),i({target:{value:document.getElementsByClassName("modal-input")[2].value}})},required:!0}),E().createElement("p",{className:"modal-validation-text"}))),E().createElement("div",{className:"modal-row"},E().createElement("span",{className:"modal-label"},"Confirm Password",E().createElement("input",{className:"modal-input",type:"password",name:"confirmPassword",onChange:i,required:!0}),E().createElement("p",{className:"modal-validation-text"}))),E().createElement("div",{className:"last-div"},E().createElement("button",{className:"modal-button modal-button-login",type:"submit",onClick:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=B(e))){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(document.getElementsByClassName("modal-validation-text"));try{for(n.s();!(t=n.n()).done;)""!==t.value.innerText&&e.preventDefault()}catch(e){n.e(e)}finally{n.f()}}},"Sign Up"),E().createElement("p",{id:"modal-button-below-text"},"Already a user? Sign in"," ",E().createElement("span",{id:"modal-button-below-text-span",onClick:function(){return r(Object.assign({},a,{modalLink:"login"}))}},"here"))))))};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const L=function(){var e,t,n=(e=(0,h.useContext)(j),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],r=n[1];function o(e,t,n){(/^\D/.test(e.key)&&"Backspace"!==e.key||1===t.value.length&&"Backspace"!==e.key)&&e.preventDefault(),4!==n&&"Backspace"!==e.key&&/^\d/.test(e.key)&&setTimeout((function(){document.getElementById("otp-".concat(n+1)).focus(),t.blur()}),200)}return E().createElement(P,null,E().createElement("i",{className:"fas fa-times",id:"close-icon",onClick:function(){return r(Object.assign({},a,{modalLink:""}))}}),E().createElement("form",{action:"/verify",method:"post"},E().createElement("div",{className:"modal-flex"},E().createElement("h1",{id:"modal-header"},"GREPIDEA"),E().createElement("h2",{id:"verify-heading"},"Verify Email"),E().createElement("p",{id:"otp-text"},"An OTP is sent to ",a.userInfo.username,". Please enter the OTP to Verify your email."),E().createElement("input",{type:"email",name:"username",value:a.userInfo.username,style:{display:"none"}}),E().createElement("input",{type:"password",name:"password",value:a.userInfo.password,style:{display:"none"}}),E().createElement("div",{id:"otp-input-div"},E().createElement("input",{type:"number",name:"first",id:"otp-1",className:"otp-input",min:"0",max:"9",onKeyDown:function(e){return o(e,document.getElementById("otp-1"),1)},required:!0}),E().createElement("input",{type:"number",name:"second",id:"otp-2",className:"otp-input",min:"0",max:"9",onKeyDown:function(e){return o(e,document.getElementById("otp-2"),2)},required:!0}),E().createElement("input",{type:"number",name:"third",id:"otp-3",className:"otp-input",min:"0",max:"9",onKeyDown:function(e){return o(e,document.getElementById("otp-3"),3)},required:!0}),E().createElement("input",{type:"number",name:"fourth",id:"otp-4",className:"otp-input",min:"0",max:"9",onKeyDown:function(e){return o(e,document.getElementById("otp-4"),4)},required:!0}),a.wrongOTP&&E().createElement("p",{className:"modal-validation-text"},"Wrong OTP. Please Try Again."),E().createElement("button",{type:"submit",className:"modal-button modal-button-verify"},"Verify OTP"),E().createElement("form",{action:"/resend",method:"post"},E().createElement("p",{id:"modal-button-below-text"},"Didnt get the OTP? Click "," ",E().createElement("button",{type:"submit",id:"resend-otp-btn"},E().createElement("span",{id:"modal-button-below-text-span"},"here")),"to resend."))))))};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const R=function(){var e,t,n=(e=(0,h.useContext)(j),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],r=n[1];function o(e){document.querySelectorAll("#credits>div>div>img")[e].style.opacity="0.5",document.getElementsByClassName("github-icon")[e].style.visibility="visible"}function i(e){document.querySelectorAll("#credits>div>div>img")[e].style.opacity=null,document.getElementsByClassName("github-icon")[e].style.visibility=null}return(0,h.useEffect)((function(){r(window.__ROUTE_DATA__)}),[r]),E().createElement(E().Fragment,null,E().createElement("div",{id:"top"},E().createElement("div",{id:"logo"},E().createElement("img",{src:I,alt:"logo"})),E().createElement("div",{id:"top-buttons"},E().createElement("button",{id:"btn-signup",onClick:function(){return r({modalLink:"signup"})}},"Sign Up"),E().createElement("button",{id:"btn-login",onClick:function(){return r({modalLink:"login"})}},"Login"))),E().createElement("div",{id:"middle"},E().createElement("h1",null,"For Greppers, by Grepians"),E().createElement("div",{id:"first-line"}),E().createElement("div",{id:"second-line"}),E().createElement("div",{id:"third-line"}),E().createElement("p",{style:{marginBottom:0}},"GrepIdea is an ",E().createElement("span",{style:{color:"blue"}},"open community")," ","to find Ideas and make something Innovative."),E().createElement("p",{style:{marginTop:0}},"Here people can discuss the Problems which needs to be focused on, Ideas to solve them, give their solutions for the problems and come together and Meet-up with the other Developers, and Crazy Thinkers to make something Out Of The Box."," ")),E().createElement("div",{id:"features"},E().createElement("div",null,E().createElement("div",null,E().createElement("img",{src:S,alt:"public"})),E().createElement("h2",null,"Public Discussions"),E().createElement("p",null,"Discuss your Ideas with the people all over the globe and get new Ideas"),E().createElement("button",null,"Browse Topics")),E().createElement("div",{style:{marginTop:"-250px"}},E().createElement("div",null,E().createElement("img",{src:C,alt:"private"})),E().createElement("h2",null,"Private Ideaspace"),E().createElement("p",null,"Discuss your projects with your teammates privately"),E().createElement("button",{style:{color:"#fff",backgroundColor:"#36393F",WebkitTextStrokeWidth:"0px",width:"90%",fontSize:"1rem"}},"Create New Ideaspace")),E().createElement("div",null,E().createElement("div",null,E().createElement("img",{src:S,alt:"public"})),E().createElement("h2",null,"One to One Chats"),E().createElement("p",null,"Meet new Innovative people and talk to them on private one to one chat"),E().createElement("button",null,"Browse Topics"))),E().createElement("div",{id:"credits"},E().createElement("h2",null,"Made with 🖤 by: "),E().createElement("div",null,E().createElement("div",null,E().createElement("img",{src:T,onMouseMove:function(){return screen.width>1024&&o(0)},onMouseOut:function(){return i(0)},alt:"Chirag Jain",onClick:function(){(0,O.navigate)("https://github.com/coderchirag")}}),E().createElement("p",null,"Chirag Jain"),E().createElement("i",{className:"fab fa-github github-icon",onMouseMove:function(){return screen.width>1024&&o(0)},onMouseOut:function(){return i(0)},onClick:function(){(0,O.navigate)("https://github.com/coderchirag")}})))),"login"===a.modalLink&&E().createElement(U,null),"signup"===a.modalLink&&E().createElement(M,null),"verify"===a.modalLink&&E().createElement(L,null),a.userAlreadyExist&&(r(Object.assign(a,{userAlreadyExist:null})),void alert("Error\nUser with the given email ID already exists\nPlease try to login")),a.userNotFound&&(r(Object.assign(a,{userAlreadyExist:null,userNotFound:null})),void alert("Error\nUser with the given email ID do not exists\nPlease try to sign up first")))};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Y=function(e){return E().createElement(E().Fragment,null,E().createElement("svg",{width:"38",height:"35",viewBox:"0 0 38 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",id:"send-icon",onClick:function(){return fetch(e.action,{method:"post",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(F({value:e.value,topicName:e.topicName},e.userInfo))}).then((function(t){/\/error/.test(t.url)?alert("Something Went Wrong.\nPlease Try Again"):/\/sendMsg/.test(t.url)?function(){console.log(!0);var t='<div class="message">\n                        <div class="user-info">\n                            <div class="user-img" style={"background-image: url('.concat(e.userInfo.smallImgUri,')"}></div>\n                                ').concat(e.userInfo.firstName," ").concat(e.userInfo.lastName,'\n                            </div>\n                        <div class="msg-content">\n                            <p>\n                                ').concat(e.value,"\n                            </p>\n                        </div>\n                    </div>");document.getElementsByTagName("main")[0].innerHTML+=t;var n=document.getElementById("send-msg");n.value="Share Your Ideas",n.style.textAlign="center",n.style.color="#c4c4c4",document.getElementsByTagName("main")[0].scrollTop=document.getElementsByTagName("main")[0].scrollHeight}():window.location.href=t.url}))}},E().createElement("path",{d:"M36.8509 15.7389L2.85328 0.185027C2.51094 0.0284195 2.12992 -0.0305635 1.75447 0.0149275C1.37903 0.0604186 1.02456 0.208517 0.732229 0.442025C0.439898 0.675533 0.221699 0.98487 0.102969 1.33412C-0.0157604 1.68336 -0.0301491 2.05819 0.0614744 2.41506L2.48531 11.8427L18.0002 17.4984L2.48531 23.1542L0.0614744 32.5818C-0.031873 32.9389 -0.0186852 33.3145 0.0994953 33.6646C0.217676 34.0148 0.435962 34.3249 0.728821 34.5589C1.02168 34.7928 1.377 34.9408 1.75322 34.9856C2.12944 35.0304 2.51101 34.9701 2.85328 34.8118L36.8509 19.258C37.1945 19.1009 37.485 18.8521 37.6885 18.5405C37.8919 18.229 38 17.8675 38 17.4984C38 17.1294 37.8919 16.7679 37.6885 16.4563C37.485 16.1447 37.1945 15.8959 36.8509 15.7389Z",fill:"#0053F5"})))};var $=["#9b3675","#d97642","#cee6b4","#93329e","#b4aee8","#1f441e","#440a67","#c8c6a7","#6e7c7c","#92967d","#fff600","#ff005c","#f25287","#00917c","#433520","#ffab73","#b68973","#9a8194","#e7d9ea","#c0e218","#cc7351","#f8f1f1","#70af85","#21209c","#23120b","#ff9b93","#54e346","#bce6eb","#fca3cc","#34626c","#9ad3bc","#ec524b","#cad315","#8f384d","#eeeded","#f2f4c0","#9088d4","#706897","#ebcfc4","#ffdada","#f3bad6","#ea2c62","#39311d","#7e7474","#c4b6b6","#16a596","#aa3a3a","#495464","#a4b787","#f9813a","#fcf876","#cee397","#f4abc4","#f05454","#c7ffd8","#ad6c80","#a6f0c6","#51c2d5","#ffe227","#80ffdb","#64dfdf","#6930c3","#f8dc81","#16c79a","#8b5e83","#3b5360","#09015f","#00af91","#f58634","#c1a1d3","#fff3e6","#1a508b","#f0c38e","#58391c","#6a492b","#f88f01","#fdffbc","#ffeebb","#ffdcb8","#ffc1b6","#184d47","#96bb7c","#d6efc7","#fad586","#ff577f","#2c061f","#374045","#295939","#e9b0df","#adeecf","#e8efeb","#fde8cd","#433520","#00917c","#dfe0df","#7c9473","#cfdac8","#e8eae6","#cdd0cb","#ff7b54","#ffd56b","#939b62","#dddddd","#e7e7de","#e5707e","#cc7351","#54e346","#393e46","#16697a","#16a596","#28df99","#99f3bd","#290001","#7d0633","#31112c","#8d93ab","#ec0101","#519872","#810000","#cc0066","#42b883"],V=["#1f441e","#440a67","#6e7c7c","#00917c","#433520","#70af85","#21209c","#23120b","#54e346","#34626c","#706897","#39311d","#7e7474","#495464","#16a596","#51c2d5","#64dfdf","#3b5360","#09015f","#00af91","#58391c","#6a492b","#1a508b","#184d47","#2c061f","#374045","#295939","#7c9473","#433520","#00917c","#290001","#7d0633","#31112c","#54e346","#393e46","#16697a","#16a596","#28df99","#519872","#810000","#42b883","#9b3675","#d97642","#93329e","#ff005c","#f25287","#cc7351","#ec524b","#8f384d","#ea2c62","#9088d4","#aa3a3a","#f05454","#ad6c80","#f58634","#8b5e83","#f88f01","#ff577f","#c0e218","#e5707e","#cc7351","#939b62","#ff7b54","#cc0066","#8d93ab","#ec0101","#cad315","#b68973","#b4aee8"];const K=require("@emotion/react");var W,H,Z;function J(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const ee=function(){var e=(0,w.useParams)().topicName,t=Q((0,h.useContext)(j),2),n=t[0],a=t[1],r=Q((0,h.useState)(void 0),2),o=r[0],i=r[1],s=Q((0,h.useState)([]),2),c=s[0],l=s[1],m=Q((0,h.useState)(void 0),2),u=m[0],d=m[1],f=Q((0,h.useState)("Search Topics"),2),p=f[0],g=(f[1],Q((0,h.useState)("Create New Topic"),2)),v=g[0],y=g[1],b=Q((0,h.useState)("Share Your Ideas"),2),E=b[0],N=b[1];function x(e,t){e.target===e.currentTarget&&(e.target.value===t&&(e.target.value=""),e.target.style.color="#000",e.target.style.textAlign="left","Share Your Ideas"!==t&&e.target.select())}function I(e,t){e.target===e.currentTarget&&""===e.target.value&&(e.target.value=t,e.target.style.color="#c4c4c4",e.target.style.textAlign="center")}return(0,h.useEffect)((function(){a(window.__ROUTE_DATA__),fetch("/get/data/topics").then((function(e){return e.json()})).then((function(e){for(var t=[],n=0;n<e.topics.length;n++){var a=$[Math.floor(Math.random()*$.length)];if(0!==n){for(;V.includes(t[n-1])&&V.includes(a)||!V.includes(t[n-1])&&!V.includes(a)||t[n-1]===a;)a=$[Math.floor(Math.random()*$.length)];t.push(a)}else t.push(a)}l(t),i(e)})),fetch("/get/data/messages/".concat(e.toLowerCase())).then((function(e){return e.json()})).then((function(e){return d(e)}))}),[a,e]),(0,K.jsx)("div",{id:"grepidea"},(0,K.jsx)("nav",{id:"navbar"},(0,K.jsx)("div",null),(0,K.jsx)("h1",{id:"heading"},"GREPIDEA"),n.userInfo?(0,K.jsx)("div",{id:"profile-pic",css:(0,K.css)(W||(W=J(["background-image: url(",")"])),n.userInfo.imgUri)}):(0,K.jsx)("div",{id:"profile-pic",className:"animate"})),(0,K.jsx)("aside",null,(0,K.jsx)("input",{type:"text",className:"topics-input",id:"search-topics",defaultValue:p,onFocus:function(e){return x(e,"Search Topics")},onBlur:function(e){return I(e,"Search Topics")}}),o?o.topics.map((function(t,n){return t!==e?(0,K.jsx)("div",{css:(0,K.css)(H||(H=J(["\n                                        background-color: ",";\n                                        color: ",";\n                                        border: 1px solid black;\n                                        box-shadow: 0px 0px 10px rgb(0 0 0 / 50%) inset;\n                                        cursor: pointer;\n                                    "])),c[n],V.includes(c[n])?"#fff":"#000"),className:"topics",onClick:function(){(0,O.navigate)("/topics/".concat(t)),window.location.reload()},onMouseEnter:function(e){return e.target.style.boxShadow="0px 4px 4px rgba(0, 0, 0, 0.25)"},onMouseLeave:function(e){return e.target.style.boxShadow="0px 0px 10px rgb(0 0 0 / 50%) inset"}},t.toUpperCase()):null})):(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"}),o?null:(0,K.jsx)("div",{className:"topics animate"})),(0,K.jsx)("main",null,(0,K.jsx)("div",{id:"topic-name"},(0,K.jsx)("h1",null,e.toUpperCase())),u?u.msgs.map((function(e){return(0,K.jsx)("div",{className:"message"},(0,K.jsx)("div",{className:"user-info"},(0,K.jsx)("div",{className:"user-img",css:(0,K.css)(Z||(Z=J(["background-image: url(",")"])),e.smallImgUri)}),"".concat(e.firstName," ").concat(e.lastName)),(0,K.jsx)("div",{className:"msg-content"},(0,K.jsx)("p",null,e.value)))})):(0,K.jsx)("div",{className:"message"},(0,K.jsx)("div",{className:"user-info"},(0,K.jsx)("div",{className:"user-img animate"}),(0,K.jsx)("div",{className:"username-animate animate"})),(0,K.jsx)("div",{className:"msg-content"},(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}))),u?null:(0,K.jsx)("div",{className:"message"},(0,K.jsx)("div",{className:"user-info"},(0,K.jsx)("div",{className:"user-img animate"}),(0,K.jsx)("div",{className:"username-animate animate"})),(0,K.jsx)("div",{className:"msg-content"},(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}))),u?null:(0,K.jsx)("div",{className:"message"},(0,K.jsx)("div",{className:"user-info"},(0,K.jsx)("div",{className:"user-img animate"}),(0,K.jsx)("div",{className:"username-animate animate"})),(0,K.jsx)("div",{className:"msg-content"},(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}))),u?null:(0,K.jsx)("div",{className:"message"},(0,K.jsx)("div",{className:"user-info"},(0,K.jsx)("div",{className:"user-img animate"}),(0,K.jsx)("div",{className:"username-animate animate"})),(0,K.jsx)("div",{className:"msg-content"},(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"}),(0,K.jsx)("div",{className:"msg-content-animate animate"})))),(0,K.jsx)("nav",{id:"bottom-bar"},(0,K.jsx)("div",null,(0,K.jsx)("input",{type:"text",className:"topics-input",id:"create-topic",defaultValue:v,onFocus:function(e){return x(e,"Create New Topic")},onBlur:function(e){return I(e,"Create New Topic")},onChange:function(e){return y(e.target.value)}}),(0,K.jsx)(Y,{value:"Create New Topic"!==v?v:null,action:"/createTopic",userInfo:{}})),(0,K.jsx)("div",{id:"msg-sending-div",style:{width:"70%"}},(0,K.jsx)("textarea",{name:"",id:"send-msg",cols:"30",rows:"2",defaultValue:E,onFocus:function(e){return x(e,"Share Your Ideas")},onBlur:function(e){return I(e,"Share Your Ideas")},onChange:function(e){return function(e){N(e.target.value),e.target.value.includes("\n")||e.target.value.length>=85?(e.target.rows=10,e.target.style.marginBottom="80px",e.target.style.width="90%",document.getElementById("bottom-bar").style.marginBottom="500px",document.querySelector("body").style.overflowY="hidden",document.getElementById("msg-sending-div").style.width="75%"):(e.target.rows=2,e.target.style.marginBottom=null,e.target.style.width=null,document.getElementById("bottom-bar").style.marginBottom=null,document.querySelector("body").style.overflowY=null,document.getElementById("msg-sending-div").style.width="70%")}(e)}}),(0,K.jsx)(Y,{value:"Share Your Ideas"!==E?E:null,action:"/sendMessage",userInfo:n.userInfo,topicName:e}))),u&&void(document.getElementsByTagName("main")[0].scrollTop=document.getElementsByTagName("main")[0].scrollHeight))},te=function(){return E().createElement("h1",null,"404 Not Found")},ne=function(){return E().createElement("h1",null,"500 Internal Server Error")},ae=function(){var e=(0,h.useState)({modalLink:""});return E().createElement(j.Provider,{value:e},E().createElement(w.Switch,null,E().createElement(w.Route,{exact:!0,path:"/",component:R}),E().createElement(w.Route,{path:"/topics/:topicName",component:ee}),E().createElement(w.Route,{path:"/500",component:ne}),E().createElement(w.Route,{path:"/400",component:te}),E().createElement(w.Route,{path:"*"},E().createElement(w.Redirect,{to:"/400"}))))},re=['<!DOCTYPE html>\n              <html>\n                <head>\n                  <meta charset="UTF-8">\n                  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n                  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                  <link rel="preconnect" href="https://fonts.gstatic.com">\n                  <link href="https://fonts.googleapis.com/css2?family=PT+Mono&family=Red+Hat+Text:wght@500&family=Rhodium+Libre&family=Roboto&family=Salsa&family=Satisfy&display=swap" rel="stylesheet">\n                  <script src="https://kit.fontawesome.com/a51dece881.js" crossorigin="anonymous"><\/script>\n                  <title>GrepIdea</title>\n                  <script src="/bundle.js" defer><\/script>\n                  <link href="/main.css" rel="stylesheet">\n                </head>\n                <body>\n                  <noscript>You need to enable JavaScript to run this app.</noscript>\n                  <div id="modal"></div>\n                  <div id="root">',"</div>\n                  <script>","<\/script>\n                </body>\n              </html>"],oe=function(e,t){return{to:e.userInfo.username,from:"jain.chirag0174@gmail.com",subject:"OTP for Verification",html:"<p>Hello ".concat(e.userInfo.firstName," ").concat(e.userInfo.lastName,', Thank You for registering on <b>GrepIdea</b>.</p><p>Use <span style="font-weight: bold; color: red; font-size: 1.5rem;">').concat(t,"</span> as OTP for Verifying your email ID.</p><p>This OTP is unique to you, so please do not share it to anyone else.</p><p></p><p></p><p></p><p>If you have not Registered on GrepIdea, then feel free to ignore this mail.</p>")}};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n().config();var le={modalLink:""},me=!1,ue=!1,de="",fe=r()();c().set("useCreateIndex",!0),fe.use(r().static("dist")),fe.use(r().urlencoded({extended:!1})),fe.use(r().json()),fe.use(i()()),fe.use(m()({secret:process.env.SECRET_KEY,resave:!1,saveUninitialized:!1})),fe.use(d().initialize()),fe.use(d().session()),c().set("useFindAndModify",!1),function e(){c().connect("mongodb+srv://".concat(process.env.MONGO_USER_NAME,":").concat(process.env.MONGO_PASSWORD,"@cluster0.eeauv.mongodb.net/grepIdeaDb?retryWrites=true&w=majority"),{useNewUrlParser:!0,useUnifiedTopology:!0},(function(t){t&&(console.log("Mongo Connection Error:\n\t".concat(t)),e())}))}();var pe=new(c().Schema)({firstName:String,lastName:String,username:String,smallImgUri:String,imgUri:String,largeImgUri:String,password:String}),ge=new(c().Schema)({topics:Array}),ve=new(c().Schema)({topic:String,msgs:Array});pe.plugin(p());var ye=new(c().model)("User",pe),be=new(c().model)("Topic",ge),he=new(c().model)("Message",ve);d().use(ye.createStrategy()),d().serializeUser(ye.serializeUser()),d().deserializeUser(ye.deserializeUser()),fe.get("/",(function(e,t){me?me=!1:delete le.userNotFound,ue?ue=!1:delete le.userAlreadyExist;var n=x().renderToString(h.createElement(w.StaticRouter,{location:e.url},h.createElement(ae,null)));e.isAuthenticated()?t.redirect("/topics/poverty"):t.send("".concat(re[0]).concat(n).concat(re[1],"window.__ROUTE_DATA__ = ").concat(b()(le)).concat(re[2]))})),fe.get("/topics/:topicName",(function(e,t){var n=x().renderToString(h.createElement(w.StaticRouter,{location:e.url},h.createElement(ae,null)));e.isAuthenticated()?be.findOne({_id:"604367458343222b04502786"},(function(a,r){a?(console.log("Error in checking if this topic exists or not: ".concat(a)),t.redirect("/500")):r.topics.includes(e.params.topicName)?t.send("".concat(re[0]).concat(n).concat(re[1],"window.__ROUTE_DATA__ = ").concat(b()(le)).concat(re[2])):t.redirect("/404")})):t.redirect("/")})),fe.get("/logout",(function(e,t){e.logOut(),le.modalLink="",delete le.userInfo,t.redirect("/")})),fe.get("/get/data/topics",(function(e,t){if(!e.isAuthenticated())return t.redirect("/");be.findById("604367458343222b04502786",(function(e,n){e?(console.log("Topics Data Fetching Error: \n\t".concat(e)),t.json({topics:[]})):t.json(n)}))})),fe.get("/get/data/messages/:topicName",(function(e,t){if(!e.isAuthenticated())return t.redirect("/");he.findOne({topic:e.params.topicName},(function(n,a){n?(console.log("Messages Data Fetching Error: \n\t".concat(n)),t.json({topic:e.params.topicName,msgs:[]})):a?t.json(a):t.json({topic:e.params.topicName,msgs:[]})}))})),fe.get("*",(function(e,t){var n=x().renderToString(h.createElement(w.StaticRouter,{location:e.url},h.createElement(ae,null)));t.send("".concat(re[0]).concat(n).concat(re[1],"window.__ROUTE_DATA__ = ").concat(b()(le)).concat(re[2]))})),fe.post("/signup",(function(e,t){if(e.isAuthenticated())return t.redirect("/topics/poverty");ye.exists({username:e.body.username},(function(n,a){if(n)return console.log("Checking of DB for checking if User Already Exists Error: \n\t".concat(n)),t.redirect("/500");if(a)Object.assign(le,{userAlreadyExist:!0}),ue=!0,t.redirect("/");else{de=function(){for(var e=0;4!==e.toString().length;)e=Math.floor(9999*Math.random())+1e3;return e}(),Object.assign(le,{modalLink:"verify",userInfo:{username:e.body.username,firstName:e.body.firstName,lastName:e.body.lastName,password:e.body.password,smallImgUri:"https://i.imgur.com/Qj5Gz8E.jpg",imgUri:"https://i.imgur.com/OsME7qws.png",largeImgUri:"https://i.imgur.com/OsME7qw.png"}});try{v(oe(le,de))}catch(e){Object.assign(le,{modal:""}),t.redirect("/")}t.redirect("/")}}))})),fe.post("/verify",(function(e,t){if(1e3*parseInt(e.body.first)+100*parseInt(e.body.second)+10*parseInt(e.body.third)+parseInt(e.body.fourth)!==de)return Object.assign(le,{wrongOTP:!0}),t.redirect("/");Object.assign(le,{modalLink:""}),delete le.wrongOTP,ye.register({firstName:le.userInfo.firstName,lastName:le.userInfo.lastName,smallImgUri:le.userInfo.smallImgUri,imgUri:le.userInfo.imgUri,largeImgUri:le.userInfo.largeImgUri,username:e.body.username},e.body.password,(function(n,a){delete le.userInfo.password,n?(console.log("User Registration Through Passport Error: \n\t".concat(n)),t.redirect("/500")):d().authenticate("local")(e,t,(function(){t.redirect("/topics/poverty")}))}))})),fe.post("/resend",(function(e,t){v(oe(le,de)),t.redirect("/")})),fe.post("/login",(function(e,t){if(e.isAuthenticated())return t.redirect("/topics/poverty");ye.findOne({username:e.body.username},(function(n,a){if(n)return console.log("Searching of DB at the time of Login Error: \n\t".concat(n)),t.redirect("/500");if(!a)return Object.assign(le,{userNotFound:!0}),me=!0,t.redirect("/");var r=new ye({username:e.body.username,password:e.body.password});e.login(r,(function(n){n?(console.log("Login with req.login method of Passport Error: \n\t".concat(n)),t.redirect("/500")):d().authenticate("local")(e,t,(function(){Object.assign(le,{userInfo:se({},a._doc)}),delete le.userInfo.__v,t.redirect("/topics/poverty")}))}))}))})),fe.post("/sendMessage",(function(e,t){e.body.value=e.body.value.replace(/^[\s\n]+|[\s\n]+$/g,""),he.findOne({topic:e.body.topicName},(function(n,a){n?(console.log("Data Fetching Error During Creating New Msg: ".concat(n)),t.redirect("/error")):a?he.findOneAndUpdate({topic:e.body.topicName},{$push:{msgs:se({},e.body)}},(function(e){e?(console.log("Data Updation Error During Create New Msg: ".concat(e)),t.redirect("/error")):t.redirect("/sendMsg")})):he.create({topic:e.body.topicName,msgs:se({},e.body)},(function(e,n){e?(console.log("Data Creation Error During Create New Msg: ".concat(e)),t.redirect("/error")):t.redirect("/sendMsg")}))}))})),fe.post("/createTopic",(function(e,t){be.findOne({_id:"604367458343222b04502786"},(function(n,a){if(n)console.log("Previous Topic Checking Error: ".concat(n)),t.redirect("/error");else{if(a.topics.includes(e.body.value.toLowerCase().trim()))return t.redirect("/topics/".concat(e.body.value.toLowerCase().trim()));be.findOneAndUpdate({_id:"604367458343222b04502786"},{$push:{topics:e.body.value.toLowerCase().trim()}},(function(n,a){if(n)return console.log("New Topic Creation Error: ".concat(n)),void t.redirect("/error");t.redirect("/topics/".concat(e.body.value.toLowerCase().trim()))}))}}))}));var Ee=process.env.PORT||5e3;fe.listen(Ee,(function(){console.log("Server is listening on port: ".concat(Ee))}))})();